{% load static %}
<!DOCTYPE html>
<html>

<head>
    <title>TRANSCENDENCE</title>

        <!-- Lien vers Google Fonts -->
        <link href="https://fonts.googleapis.com/css2?family=Poiret+One&display=swap" rel="stylesheet">

        <!-- Lien pour l'icÃ´ne Material Symbols -->
        <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
        <link rel="stylesheet" type="text/css" href="{% static 'web/css/style.css' %}">
        <script type="text/javascript"  src="{% static 'web/js/script.js' %}"></script>
        <script type="text/javascript"  src="{% static 'web/js/pong.js' %}"></script>
</head>

<body>
    <input type="hidden" id="csrfToken" name="csrfmiddlewaretoken" value="{{ csrf_token }}">

    <!-- MAIN PAGE -->
    <div id="mainPage" class="mainPage">
		
		<div id="notif-box" class="hide">
			<p id="notif-message">Nouvelle notification !</p>
			<button onclick="hideNotif()">OK</button>
		</div>
        <h1 class="mainTitle">TRANSCENDENCE</h1>
        <button class="friendButton" onclick="unscrollToSettingMenu()">
            <span class="material-symbols-outlined">group_add</span>
        </button>
    
        <button class="settingsButton" onclick="unscrollToFriendMenu()">
            <span class="material-symbols-outlined">settings</span>
        </button>

        <button class="playButton" onclick="scrollToBottom()">
            <span class="material-symbols-outlined">play_circle</span>
            <span class="material-symbols-outlined">PLAY</span>
        </button>

</div> 


    <!-- GAME PAGE -->
    <div id="bottomPage" class="bottomPage">
	<!--	<form id="form">
			<input type="text" name="message"/>
			</form>
			<span id="messages" style="color: white;background-color: rgb(255, 0, 0);" ></div>
			</span>-->
        <button class="toMainPageButton" onclick="scrollToMainPage()">
            <span class="material-symbols-outlined">keyboard_double_arrow_up</span>
        </button>


        <div id="scoreboard" class="TheGame">
            <h2 id="p1-points" style="font-family: 'Poiret One';"></h2>
            <h2 id="p2-points" style="font-family: 'Poiret One';"></h2>
        </div>


		<center><div id="GameMenu">
			<span id="VsAi" onclick="activateAiGame()" class="GameOption">
				<span class="material-symbols-outlined">smart_toy</span>
				<span class="material-symbols-outlined">Vs Ai</span>
			</span>
			<span id="VsFriend" onclick="activateFriendMenu()" class="GameOption">
				<span class="material-symbols-outlined">swords</span>
				<span class="material-symbols-outlined">Vs Friend</span>
			</span>
			<span id="local" onclick="activateLocalGame()" class="GameOption">
				<span class="material-symbols-outlined">public_off</span>
				<span class="material-symbols-outlined">Local</span>
			</span>
			<span id="online" onclick="ShowFriendList_game()" class="GameOption">
				<span class="material-symbols-outlined">language</span>
				<span class="material-symbols-outlined">Online</span>
			</span>
		</div></center>


		<h1 id="FriendTitle" class="material-symbols-outlined" style="color: white; font-family: 'Poiret One', serif">Friend List</h1>
		<div class="friendList">
				<ul id = "friendList"></ul>
		</div>

   		<canvas id= "TheGame" style="border:1px solid rgb(102, 90, 102);" class="TheGame"> </canvas>
		<button id="ReturnButton" class="material-symbols-outlined" onclick="returnToPreviousMenu()">arrow_backReturn</button>

		
		<div id="GameInvite">
			<button class="material-symbols-outlined" id="accept" onclick="acceptGameInvite()" ><span>check</span><span>Accept</span></button>
			<button class="material-symbols-outlined" id="decline" onclick="declineGameInvite()"><span>close</span><span>Decline</span></button>
		</div>


		<span class="material-symbols-outlined" id="loading">Waiting for p2 to accept...</span>
		<div id="winner">
			<span class="material-symbols-outlined" style="scale: 2">trophy</span>
			<span id="winText" class="material-symbols-outlined"></span>
			<span class="returnButton" onclick="rePlay()" style="margin-top: 35%;">
				<span class="material-symbols-outlined" >refresh</span>
				<span style="   font-size: 35px; color: #f0f0f0; font-family: 'Poiret One'; " >Play again</span>
			</span>
			<span class="returnButton" onclick="returnToMenu()" style="margin-top: 60%;">
				<span class="material-symbols-outlined" >arrow_back</span>
				<span style="   font-size: 35px; color: #f0f0f0; font-family: 'Poiret One';" >Return to menu</span>
			</span>
		</div>


    </div>


<!-- HERE IS THE FRIEND MENU -->
	<div id="friendMenu" class="friendMenu">
			<h1 class="smallerTitle">Friends</h1>
			<input 
				type="text" 
				id="searchBar" 
				placeholder="Rechercher un ami..."
				oninput="searchFriends()" 
			/>
			<ul id="results"></ul>  <!-- Affichage des résultats de recherche -->
	
	
	
	
			<h3 class="simpleText">Demande d'amis</h3>
	
			<ul id="friend-request-list">
				<!-- Liste des amis affichée ici -->
			</ul>
	
			<h3 class="simpleText">Liste d'amis</h3>
			<ul id="friend-list">
				<!-- Liste des amis affichée ici -->
			</ul>
	
	
			<div id="userDetails" class="userDetails">
	
				<button class="backButton" onclick="resetUserDetails()">
					<span class="material-symbols-outlined">arrow_back</span>
				</button>
	
				<h2><span id="userUsername" class="userName"></span></h2>
				<div id="ifUnblocked">
					<p><strong>Online status :</strong> <span id="userStatus"></span></p>
					
					<div class="userButtonBox">
					<!-- Bouton Ajouter un ami avec un attribut data pour stocker l'ID -->
					<button id="addFriendButton" 
							class="addFriendButton" 
							data-user-id="" 
							onclick="addFriendRequest()">
							<p>Ajouter</p>
							<span class="material-symbols-outlined icon-smaller">person_add</span>
					</button>
	
					<button id="statsButton" 
							class="addFriendButton" 
							data-user-id="" 
							onclick="addFriendRequest()">
							<p>Stats</p>
							<span class="material-symbols-outlined icon-smaller">trophy</span>
					</button>
	
					<button id="blockButton" 
							class="blockButton" 
							data-user-id="" 
							onclick="blockUser()">
							<p>Bloquer</p>
							<span class="material-symbols-outlined icon-smaller">block</span>
					</button>
					</div>
	
	
					<div id="ifFriend">
						<button id="sendGameButton" 
							class="sendGameButton" 
							data-user-id="" 
							onclick="addFriendRequest()">
							<p>Jouer</p>
						</button>
						<div class="chat_zone">	
							<div id="userChat" class="chat">
							</div>
							<input id="sendMessageBar" 
								type="text" 
								placeholder="Votre message..."
								data-user-id="" 
								oninput="searchFriends()" />
						</div>
					</div>
					<div id="ifNotFriend">
						<hr>
						<h3 class="userName">Ajouter le joueur pour interagir</h3>
					</div>
	
				</div>
				
				<div id="ifBlocked">
					<div class="userButtonBox">
						<button id="unblockButton" 
							class="unblockButton" 
							data-user-id="" 
							onclick="blockUser()">
							<p>Debloquer</p>
							<span class="material-symbols-outlined icon-smaller">favorite</span>
						</button>
					</div>
					<hr>
				</div>
			</div>
		</div>
	
	
	
	
		
	</div>
	
		
	
	
	<!-- HERE IS THE SETTINGS MENU -->
    <div id="settingsMenu" class="settingsMenu">
        <h1>Settings</h1>
        <p id="username">Votre Username : {{ request.user.username }}</p>
		<div id="Stats">
			<h1 class="simpleText">Stats</h1>
			<p id="Victory">Victories: {{ request.user.victory  }} </p>
			<p id="Losses">Losses: {{ request.user.losses  }}</p>
		</div>
        <a href="{% url 'logout' %}" id="logoutButton"><span class="material-symbols-outlined">logout</span></a>
    </div>

    


</body>
</html>